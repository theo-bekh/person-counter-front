(this["webpackJsonpperson-detector-front"]=this["webpackJsonpperson-detector-front"]||[]).push([[0],{110:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(34),c=n.n(i),r=(n(110),n(17)),o=n(18),l=n(20),j=n(19),u=n(185),x=n(184),h=n(183),d=n(180),b=n(181),p=n(1);function O(){var e=new Date;return{hour:f(e.getHours()),min:f(e.getMinutes())}}function f(e){return("0"+String(e)).slice(-2)}var m=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={time:O()},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:O()})}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return Object(p.jsx)(h.a,{variant:"h4",children:this.state.time.hour+" : "+this.state.time.min})}}]),n}(a.Component),v=n(89),g=(n(116),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=Math.floor(100*this.props.person/this.props.maxPerson),t="ok";return e>=80?t="full":e>=60&&(t="half"),Object(p.jsx)(v.Progress,{type:"circle",percent:e,width:this.props.width,status:t,theme:{full:{symbol:e+"%",trailColor:"#F08080",color:"red"},half:{symbol:e+"%",trailColor:"yellow",color:"orange"},ok:{symbol:e+"%",trailColor:"#ADD8E6",color:"blue"}}})}}]),n}(a.Component)),y=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(x.a,{sx:{display:"flex",height:"8em",m:2},children:[Object(p.jsx)(h.a,{variant:"h3",sx:{fontWeight:"light"},children:this.props.person}),Object(p.jsx)(x.a,{style:{height:"8rem",width:2,backgroundColor:"black",transform:"rotate(30deg)"}}),Object(p.jsx)(h.a,{variant:"h3",sx:{fontWeight:"light",transform:"translate(0, 4rem)"},children:this.props.maxPerson}),Object(p.jsx)(h.a,{sx:{fontWeight:"light",transform:"translate(0, 5.5rem)",ml:1},children:"of occupation"})]})}}]),n}(a.Component),k=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={person:30,maxPerson:50,welcomeMessage:"Welcome to the Museu Nacional d'Art de Catalunya"},a}return Object(o.a)(n,[{key:"testAdd",value:function(){this.setState({person:this.state.person+1})}},{key:"testSub",value:function(){this.setState({person:this.state.person-1})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(u.a,{children:[Object(p.jsxs)(x.a,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",mb:3,mt:3},children:[Object(p.jsx)(x.a,{sx:{display:"flex"},children:Object(p.jsx)(h.a,{variant:"h5",component:"div",children:this.state.welcomeMessage})}),Object(p.jsx)(x.a,{sx:{display:{xs:"none",md:"flex"}},children:Object(p.jsx)(m,{})})]}),Object(p.jsx)(h.a,{variant:"h6",children:"Occupation"}),Object(p.jsx)(x.a,{children:Object(p.jsx)(x.a,{sx:{display:"flex",flexDirection:"column"},children:Object(p.jsxs)(x.a,{sx:{display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"wrap"},children:[Object(p.jsx)(g,{person:this.state.person,maxPerson:this.state.maxPerson,width:300}),Object(p.jsx)(y,{person:this.state.person,maxPerson:this.state.maxPerson})]})})}),Object(p.jsx)(h.a,{variant:"h6",children:"Attendance"}),Object(p.jsx)(x.a,{sx:{display:"flex",justifyContent:"center"},children:Object(p.jsx)(d.a,{variant:"rectangular",width:600,height:300})}),Object(p.jsx)(h.a,{variant:"h6",children:"Test"}),Object(p.jsx)(b.a,{onClick:function(){return e.testAdd()},children:"Plus"}),Object(p.jsx)(b.a,{onClick:function(){return e.testSub()},children:"Sub"})]})}}]),n}(a.Component),C=n(182),w=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsx)(d.a,{variant:"rectangular",width:960,height:540})}}]),n}(a.Component),S=n(186),P=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(S.a,{sx:{p:1,m:1},children:[Object(p.jsx)(h.a,{variant:"h5",children:"Security Camera"}),Object(p.jsx)(x.a,{sx:{p:1},children:Object(p.jsx)(w,{})})]})}}]),n}(a.Component),M=n(188),W=function(){function e(t){Object(r.a)(this,e),this.callback=t,this.initializeWebSocket()}return Object(o.a)(e,[{key:"initializeWebSocket",value:function(){var e=this;setTimeout((function(){e.updateValue(25,50),e.interval=setInterval((function(){var t=Math.random()>.5?1:-1;e.updateValue(e.occupation+t,e.maxOccupation)}),1e3)}),100)}},{key:"destroy",value:function(){clearInterval(this.interval)}},{key:"updateValue",value:function(e,t){this.occupation=e,this.maxOccupation=t,this.callback()}},{key:"addPerson",value:function(){this.updateValue(this.occupation+1,this.maxOccupation)}},{key:"removePerson",value:function(){this.updateValue(this.occupation-1,this.maxOccupation)}}]),e}(),F=n(91),I=n.n(F),A=n(90),L=n.n(A),D=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={person:0,maxPerson:100,maskForgotten:3,occupationService:null,isModificationOpen:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.occupationService=new W((function(){e.setState({person:e.occupationService.occupation,maxPerson:e.occupationService.maxOccupation})}))}},{key:"componentWillUnmount",value:function(){this.occupationService.destroy()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(S.a,{sx:{p:3,m:1},children:[Object(p.jsx)(h.a,{variant:"h5",children:"Occupation"}),Object(p.jsxs)(x.a,{sx:{display:"flex",p:2,justifyContent:"space-around",alignItems:"center"},children:[Object(p.jsx)(g,{person:this.state.person,maxPerson:this.state.maxPerson,width:180}),Object(p.jsx)(y,{person:this.state.person,maxPerson:this.state.maxPerson})]}),Object(p.jsx)(x.a,{sx:{display:"flex",gap:2,justifyContent:"end"},children:Object(p.jsxs)(x.a,{sx:{display:"flex",gap:2},children:[Object(p.jsx)(M.a,{color:"primary","aria-label":"plus",onClick:function(){e.occupationService.addPerson()},children:Object(p.jsx)(L.a,{})}),Object(p.jsx)(M.a,{color:"secondary","aria-label":"less",onClick:function(){e.occupationService.removePerson()},children:Object(p.jsx)(I.a,{})})]})})]})}}]),n}(a.Component),E=n.p+"static/media/sign_mask.3d0ba3b8.png",T=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={personWithoutMask:20},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsxs)(S.a,{sx:{p:3,m:1},children:[Object(p.jsx)(h.a,{variant:"h5",children:"Mask"}),Object(p.jsxs)(x.a,{sx:{display:"flex",p:2,justifyContent:"space-around",alignItems:"center",flexWrap:"wrap",alignContent:"center"},children:[Object(p.jsx)("img",{src:E,width:"80",alt:"mask"}),Object(p.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",gap:2},children:[Object(p.jsxs)(h.a,{variant:"h2",children:[" ",this.state.personWithoutMask," "]}),Object(p.jsx)(h.a,{children:"person(s) without mask today"})]}),Object(p.jsx)(b.a,{onClick:function(){e.setState({personWithoutMask:0})},children:"Reset"})]})]})}}]),n}(a.Component);var z=function(){return Object(p.jsx)(x.a,{sx:{display:"flex",justifyContent:"center",mt:2},children:Object(p.jsxs)(C.a,{container:!0,sx:{display:"flex",justifyContent:"center"},children:[Object(p.jsx)(C.a,{item:!0,children:Object(p.jsx)(P,{})}),Object(p.jsxs)(C.a,{item:!0,sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(p.jsx)(D,{}),Object(p.jsx)(T,{})]})]})})};var G=function(){return Object(p.jsx)("div",{children:"Stat"})};var V=function(){return Object(p.jsx)("div",{children:"Sett"})},B=(n(117),n(13)),_=n(189),N=n(190),q=n(191),H=n(95),J=n(92),R=n.n(J),U=n(177),K=n(14),Q=a.createContext(null);function X(e){var t=e.children,n=a.useState(null),s=Object(B.a)(n,2),i=s[0],c=s[1],r={user:i,signin:function(e){return new Promise((function(t){c("OK"),t(),e()}))},signout:function(e){return new Promise((function(t){c(null),t(),e()}))}};return Object(p.jsx)(Q.Provider,{value:r,children:t})}function Y(){return a.useContext(Q)}function Z(e){var t=e.children,n=Y(),a=Object(K.f)();return n.user?t:Object(p.jsx)(K.a,{to:"/login",state:{from:a}})}var $=n.p+"static/media/Logo2.04e98b58.svg",ee=n(93),te=n.n(ee),ne=[{name:"Home",route:"/"},{name:"Admin Screen",route:"/admin"},{name:"Statistics",route:"/statistics"},{name:"Entrance screen",route:"/entrance-screen"}];function ae(){var e=Object(K.g)(),t=Y();return t.user?Object(p.jsxs)(x.a,{sx:{flexGrow:1,marginLeft:2,justifyContent:"end",display:"flex",gap:1},children:[Object(p.jsx)(q.a,{onClick:function(){e("/settings")},children:Object(p.jsx)(te.a,{sx:{color:"white"}})}),Object(p.jsx)(b.a,{color:"inherit",variant:"outlined",onClick:function(){t.signout((function(){e("/")}))},children:"Log Out"})]}):Object(p.jsx)(x.a,{sx:{flexGrow:1,marginLeft:2,justifyContent:"end",display:"flex"},children:Object(p.jsx)(b.a,{color:"inherit",variant:"outlined",onClick:function(){return e("/login")},children:"Log In"})})}var se=function(e){var t=Object(K.g)(),n=a.useState(null),s=Object(B.a)(n,2),i=s[0],c=s[1],r=function(e){t(e),c(null)};return Object(p.jsx)(_.a,{position:"static",children:Object(p.jsx)(u.a,{maxWidth:"xl",children:Object(p.jsxs)(N.a,{disableGutters:!0,children:[Object(p.jsx)(x.a,{sx:{mr:2,display:{xs:"none",md:"flex"}},children:Object(p.jsx)("img",{src:$,alt:"logo",height:"80px"})}),Object(p.jsxs)(x.a,{sx:{flexGrow:2,display:{xs:"flex",md:"none"}},children:[Object(p.jsx)(q.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit",children:Object(p.jsx)(R.a,{})}),Object(p.jsx)(H.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(i),onClose:r,sx:{display:{xs:"block",md:"none"}},children:ne.map((function(e){return Object(p.jsx)(U.a,{onClick:function(){r(e.route)},children:Object(p.jsx)(h.a,{textAlign:"center",children:e.name})},e.name)}))})]}),Object(p.jsx)(x.a,{sx:{flexGrow:2,display:{xs:"flex",md:"none"},justifyContent:"center"},children:Object(p.jsx)("img",{src:$,alt:"logo",height:"80px"})}),Object(p.jsx)(x.a,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:ne.map((function(e){return Object(p.jsx)(b.a,{onClick:function(){r(e.route)},sx:{my:2,color:"white",display:"block"},children:e.name},e.name)}))}),Object(p.jsx)(ae,{})]})})})};var ie=function(){return Object(p.jsx)(se,{})},ce=n(47),re=n(192),oe=n(193),le=n(175),je=(n(119),n.p+"static/media/Logo.43f0375e.svg");var ue=function(){var e,t,n=Object(K.g)(),a=Y(),s=(null===(e=Object(K.f)().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";return"login"===s&&(s="/"),Object(p.jsx)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:500,m:2},children:Object(p.jsxs)(S.a,{id:"login-card",children:[Object(p.jsx)(h.a,{variant:"h3",noWrap:!0,component:"div",children:" Sign in "}),Object(p.jsx)(x.a,{children:Object(p.jsx)("img",{src:je,alt:"logo",height:"150px"})}),Object(p.jsx)(re.a,{fullWidth:!0,children:Object(p.jsxs)(oe.a,{children:[Object(p.jsx)(le.a,{required:!0,label:"Login",variant:"outlined",sx:{m:1}}),Object(p.jsx)(le.a,{required:!0,label:"Password",variant:"outlined",sx:{m:1},type:"password"})]})}),Object(p.jsx)(C.a,{container:!0,sx:{justifyContent:"center",m:1},children:Object(p.jsx)(C.a,{item:!0,children:Object(p.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){a.signin((function(){n(s,{replace:!0})}))},children:"Login"})})})]})})},xe=n.p+"static/media/sign_stop.3c4e9b02.png",he=n.p+"static/media/sign_ok.5d38830f.png",de=n(94),be=n.n(de),pe=(n(120),n(77));function Oe(e){var t=e.canEnter?he:xe,n=e.canEnter?"Please enter":"It is full, sorry...";return Object(p.jsxs)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:3},children:[Object(p.jsx)("img",{src:t,alt:"sign",width:"160"}),Object(p.jsxs)(h.a,{variant:"h2",children:[" ",n," "]})]})}function fe(e){var t=e.children,n=Object(pe.b)();return Object(p.jsxs)("div",{children:[Object(p.jsx)(x.a,{sx:{display:"flex",m:2,justifyContent:"right"},children:Object(p.jsx)(b.a,{onClick:n.enter,variant:"outlined",children:"Show in fullscreen"})}),Object(p.jsx)(S.a,{sx:{p:1},children:Object(p.jsx)(pe.a,{handle:n,children:Object(p.jsx)(x.a,{children:t})})})]})}var me=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={person:30,maxPerson:50,welcomeMessage:"Welcome to the Museu Nacional d'Art de Catalunya",maskForgotten:!1},a}return Object(o.a)(n,[{key:"testAdd",value:function(){this.setState({person:this.state.person+1})}},{key:"testSub",value:function(){this.setState({person:this.state.person-1})}},{key:"testMaskForgotten",value:function(){var e=this;this.setState({maskForgotten:!0}),setTimeout((function(){e.setState({maskForgotten:!1})}),1e4)}},{key:"isFull",value:function(){return this.state.person>=this.state.maxPerson}},{key:"maskForgotten",value:function(){return this.state.maskForgotten}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(u.a,{children:[Object(p.jsxs)(fe,{children:[Object(p.jsxs)(x.a,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",mb:3},children:[Object(p.jsx)(x.a,{sx:{display:"flex"},children:Object(p.jsx)(h.a,{variant:"h5",component:"div",children:this.state.welcomeMessage})}),Object(p.jsx)(x.a,{sx:{display:{xs:"none",md:"flex"}},children:Object(p.jsx)(m,{})})]}),Object(p.jsx)(h.a,{variant:"h6",children:"Occupation"}),Object(p.jsxs)(x.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",mb:3,gap:20},children:[Object(p.jsx)(g,{person:this.state.person,maxPerson:this.state.maxPerson,width:350}),Object(p.jsx)(y,{person:this.state.person,maxPerson:this.state.maxPerson})]}),Object(p.jsx)(Oe,{canEnter:!this.isFull()}),Object(p.jsxs)(x.a,{sx:{display:this.isFull()?"flex":"none",justifyContent:"center",alignItems:"center",gap:2},children:[Object(p.jsx)(be.a,{sx:{fontSize:70}}),Object(p.jsxs)(h.a,{variant:"h5",children:["Please wait approximately ",3," minutes"]})]}),Object(p.jsxs)(x.a,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"center",gap:2,mb:3},children:[Object(p.jsx)("img",{src:E,alt:"sign_mask",width:"90"}),Object(p.jsx)(x.a,{sx:{display:this.maskForgotten()?"none":"flex"},children:Object(p.jsx)(h.a,{variant:"h5",children:" For our safety, please wear a mask and respect social distancing."})}),Object(p.jsx)(x.a,{sx:{display:this.maskForgotten()?"flex":"none"},children:Object(p.jsx)(h.a,{variant:"h3",color:"error",className:"blink",children:" Attention, you forgot to wear your mask !"})})]})]}),Object(p.jsx)(h.a,{variant:"h6",children:"Test"}),Object(p.jsxs)(x.a,{sx:{display:"flex",gap:2},children:[Object(p.jsx)(b.a,{onClick:function(){return e.testAdd()},variant:"contained",children:"Plus"}),Object(p.jsx)(b.a,{onClick:function(){return e.testSub()},variant:"contained",children:"Sub"}),Object(p.jsx)(b.a,{onClick:function(){return e.testMaskForgotten()},variant:"contained",children:"Mask unwear detected"})]})]})}}]),n}(a.Component);var ve=function(){return Object(p.jsx)(X,{children:Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ie,{}),Object(p.jsxs)(K.d,{children:[Object(p.jsx)(K.b,{path:"/",element:Object(p.jsx)(k,{})}),Object(p.jsx)(K.b,{exact:!0,path:"login",element:Object(p.jsx)(ue,{})}),Object(p.jsx)(K.b,{exact:!0,path:"entrance-screen",element:Object(p.jsx)(Z,{children:Object(p.jsx)(me,{})})}),Object(p.jsx)(K.b,{exact:!0,path:"admin",element:Object(p.jsx)(Z,{children:Object(p.jsx)(z,{})})}),Object(p.jsx)(K.b,{exact:!0,path:"statistics",element:Object(p.jsx)(Z,{children:Object(p.jsx)(G,{})})}),Object(p.jsx)(K.b,{exact:!0,path:"settings",element:Object(p.jsx)(Z,{children:Object(p.jsx)(V,{})})})]})]})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))},ye=(n(121),n(122),n(123),n(124),n(96)),ke=n(179);ge();var Ce=Object(ye.a)({palette:{type:"light",primary:{main:"#1b45a0"},secondary:{main:"#d50000"}},shape:{borderRadius:10},components:{MuiAppBar:{styleOverrides:{colorInherit:{backgroundColor:"#002845",color:"#fff"}},defaultProps:{color:"inherit"}}}});c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(ke.a,{theme:Ce,children:Object(p.jsx)(ve,{})})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.61778da4.chunk.js.map